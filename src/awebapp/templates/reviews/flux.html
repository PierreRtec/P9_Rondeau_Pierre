<!doctype html>
{% extends "awebapp/baselog.html"%}
{% load static %}
{% block addcss %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
{% endblock %}
{% block content %}
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <link rel="stylesheet" type="text/css" href="{% static 'awebapp/belognav.css' %}"> 
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <title>{% block title %}LITReview Flux{% endblock %}</title>
  </head>
<body>
  <main role="main" class="container">
    <div class="row justify-content-md-center">
        <div class="col col-lg-3">
            <a class="btn btn-lg btn-primary" href="http://127.0.0.1:8000/awebapp/create-ticket" role="button">Demander une critique</a>
        </div>
            <div class="col-md-auto">
                <a class="btn btn-lg btn-primary" href="http://127.0.0.1:8000/awebapp/create-review" role="button">Créer une critique</a>        
            </div>
            {% for ticket in tickets %}
                {% if ticket.review.exists %}
                {% else %}
                    <div style="border-radius: 10px; border: 2px solid white; background-color: white">
                        Vous avez publié un ticket
                        <h5>{{ ticket.title }}</h5><br>
                        {{ ticket.description }}<br>
                        <img src="{{ ticket.image.url }}" widht="200px" height="200px"><br>
                        {{ ticket.time_created }}<br>
                        {% if ticket.review.exists %}
                        {% else %}
                            <a class="btn btn-secondary" href="http://127.0.0.1:8000/awebapp/create-review-ticket/{{ ticket.id }}" role="button">Répondre à un ticket</a> 
                        {% endif %}
                </div>
                <br><hr>
            {% endif %}
        {% endfor %}
        <br><hr><br>
        {% for review in reviews %}
            <div style="border-radius: 10px; border: 2px solid white; background-color: white">
                <p>Vous avez publié une critique</p><br>
                <h5>{{ review.headline }} - {{ review.rating }}</h5>
                {{ review.body }}<br>
                {{ review.time_created }}<br>
                <div class="col p-3" style="border-radius: 10px; border: 2px solid white; margin: 15px; background-color:lightgray;color:#444444">
                    Ticket - {{ review.ticket.user }}<br>
                    <h5>{{ review.ticket.title }}</h5><br>
                    {{ review.ticket.description }}<br>
                    <img src="{{ ticket.image.url }}" widht="200px" height="200px"><br>
                    {{ review.ticket.time_created }}<br>
                </div>
            </div>
            <hr>
        {% endfor %}
    </div>
  </div>               
</main>
</body>
</html>
{% endblock %}